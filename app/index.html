<!DOCTYPE html>
<html lang="en-US" ng-app="weatherApp">
<head>

	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Alexandra Haret">

	<title>Forecast project</title>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/styles.css">

	<!-- <script src="https://code.angularjs.org/1.6.2/angular.min.js"></script>
	<script src="https://code.angularjs.org/1.6.2/angular-route.min.js"></script
	<script src="https://code.angularjs.org/1.6.2/angular-resource.min.js"></script>
	<script src="https://code.angularjs.org/1.6.2/angular-animate.js"></script> -->

	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/angular-route/angular-route.js"></script>
	<script src="bower_components/angular-resource/angular-resource.js"></script>
	<script src="bower_components/angular-animate/angular-animate.js"></script>




	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="services/services.js"></script>
	<script type="text/javascript" src="directives/directives.js"></script>
	<script type="text/javascript" src="controllers/address.controller.js"></script>
	<script type="text/javascript" src="controllers/forecast.controller.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.5/moment-timezone-with-data.min.js"></script>

</head>

<body>

	<div class="container">

		<div class="row" ng-controller="addressController as addressCtrl">
			<div class="col-md-6 col-md-offset-3" >
				<h4 class='mytitle'>Forecast by City </h4>
				<form ng-submit="addressCtrl.submit()">
					<input type="text" ng-model="addressCtrl.address" class="form-control" />
					<input type="submit" value="Get forecast" class="btn btn-primary" />
				</form>

				<div ng-controller="forecastController as forecastCtrl" ng-cloak >

					<div ng-switch on="timeframe">
						<div class="panel panel-default">

							<div class="panel-body show-hide" ng-show="addressCtrl.submitted">
								<div class="row">
									<div class="col-md-6">
										<h3>{{ addressCtrl.formattedAddress }}</h3>
									</div>
									<div class="col-md-6">
										<a ng-click="timeframe = '24h'">Right now</a> |
										<a ng-click="timeframe = '7days'">7 days</a>
									</div>
								</div>

								<div ng-switch-default>
									<div class="row">
										<div class="col-md-12">
											<h4>Right now: {{ addressCtrl.weatherResult.currently.summary }} </h4>
										</div>
									</div>

									<div class="row">
										<div class="col-sm-2">
											<img src="img/{{addressCtrl.weatherResult.currently.icon}}.png" />
										</div>
										<div class="col-sm-10">
											<h3>{{ forecastCtrl.convertToCelsius(addressCtrl.weatherResult.currently.temperature) }}&deg;C  <small> / feels like: {{ forecastCtrl.convertToCelsius(addressCtrl.weatherResult.currently.apparentTemperature)}}&deg;C</small></h3>
											<p>Precipitation: {{ forecastCtrl.convertToPercentage(addressCtrl.weatherResult.currently.precipProbability) }}%</p>
											<p>Wind speed: {{ addressCtrl.weatherResult.currently.windSpeed }} km/h</p>
										</div>
									</div>
									<hr />
									<div class="row text-center">

										<div class="col-sm-2" ng-repeat="w in
										[
										addressCtrl.weatherResult.hourly.data[1],
										addressCtrl.weatherResult.hourly.data[2],
										addressCtrl.weatherResult.hourly.data[3],
										addressCtrl.weatherResult.hourly.data[4],
										addressCtrl.weatherResult.hourly.data[5],
										addressCtrl.weatherResult.hourly.data[6],
										] track by $index">
										<weather-report-hourly weather-result="w" convert-to-standard="forecastCtrl.convertToCelsius(temperature)" convert-to-date="forecastCtrl.convertToDate(date)" convert-to-percentage="forecastCtrl.convertToPercentage(precip)" date-format="HH:mm" timeframe="{{timeframe}}"></weather-report-hourly>
									</div>
								</div>
							</div>

							<div ng-switch-when="7days">
								<div class="row">
									<div class="col-md-12">
										<h4>Today ({{ forecastCtrl.convertToDate(addressCtrl.weatherResult.daily.data[1].time) | date: "EEE" }}): {{ addressCtrl.weatherResult.daily.data[1].summary }} </h4>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-2">
										<img src="img/{{addressCtrl.weatherResult.daily.data[0].icon}}.png" />
									</div>
									<div class="col-sm-10">
										<h3>Min: {{ forecastCtrl.convertToCelsius(addressCtrl.weatherResult.daily.data[1].temperatureMin) }}&deg;C  <span class="text-muted"> / Max: {{ forecastCtrl.convertToCelsius(addressCtrl.weatherResult.daily.data[1].temperatureMax)}}&deg;C</span></h3>
										<p>Precipitation: {{ forecastCtrl.convertToPercentage(addressCtrl.weatherResult.daily.data[1].precipProbability) }}%</p>
										<p>Wind speed: {{ addressCtrl.weatherResult.daily.data[1].windSpeed }} km/h</p>
									</div>
								</div>
								<hr />
								<div class="row text-center" >
									<div class="col-sm-2" ng-repeat="w in
									[
									addressCtrl.weatherResult.daily.data[2],
									addressCtrl.weatherResult.daily.data[3],
									addressCtrl.weatherResult.daily.data[4],
									addressCtrl.weatherResult.daily.data[5],
									addressCtrl.weatherResult.daily.data[6],
									addressCtrl.weatherResult.daily.data[7]
									] track by $index">
									<weather-report-daily weather-result="w" convert-to-standard="forecastCtrl.convertToCelsius(temperature)" convert-to-date="forecastCtrl.convertToDate(date)" convert-to-percentage="forecastCtrl.convertToPercentage(precip)" date-format="EEEE" timeframe="{{timeframe}}"> </weather-report-daily>
								</div>
							</div>
						</div>

					</div>

				</div>

			</div>


		</div>
	</div>
</div>


</div>

</body>
</html>
